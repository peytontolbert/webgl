# Critical Files Reference Guide

This guide provides a quick reference for the most important files in the GTA5 Terrain Extractor project and their dependencies.

## CodeWalker Source Files

### Critical Files and Their Dependencies

| File | Purpose | Dependencies |
|------|---------|-------------|
| `HeightmapFile.cs` | Reads and processes heightmap data | `ResourceData.cs`, `DataReader.cs`, `DataWriter.cs` |
| `Heightmaps.cs` | Manages heightmap files and terrain generation | `HeightmapFile.cs`, `GameFileCache.cs`, `EditorVertex.cs` |
| `RpfManager.cs` | Manages RPF archives and file access | `RpfFile.cs`, `RpfEntry.cs` |
| `GTAKeys.cs` | Provides encryption keys for GTA5 files | `GTACrypto.cs`, `GTA5KeyHashes.cs` |
| `RpfFile.cs` | Represents an RPF archive | `RpfEntry.cs`, `GTAKeys.cs` |
| `ResourceData.cs` | Base class for resource data handling | `DataReader.cs`, `DataWriter.cs` |

### File Hierarchy

```
CodeWalker.Core/
├── Utils/
│   ├── Matrices.cs
│   ├── Vectors.cs
│   ├── Quaternions.cs
│   ├── BoundingBoxes.cs
│   ├── Xml.cs
│   ├── EditorVertex.cs
│   └── BasePathData.cs
├── GameFiles/
│   ├── RpfManager.cs
│   ├── RpfFile.cs
│   ├── RpfEntry.cs
│   ├── RpfDirectoryEntry.cs
│   ├── RpfResourceFileEntry.cs
│   ├── RpfBinaryFileEntry.cs
│   ├── RpfResourcePage.cs
│   ├── Utils/
│   │   ├── GTAKeys.cs
│   │   ├── Jenkhash.cs
│   │   ├── JenkIndex.cs
│   │   ├── DataReader.cs
│   │   ├── DataWriter.cs
│   │   └── GTACrypto.cs
│   ├── Resources/
│   │   ├── ResourceData.cs
│   │   ├── ResourceBuilder.cs
│   │   └── ResourceFileTypes.cs
│   └── FileTypes/
│       └── HeightmapFile.cs
└── World/
    └── Heightmaps.cs
```

## Project Files

### Critical Files and Their Dependencies

| File | Purpose | Dependencies |
|------|---------|-------------|
| `compiler.py` | Compiles CodeWalker source files | `stubs.py` |
| `integration.py` | Manages CodeWalker integration | `compiler.py` |
| `stubs.py` | Provides stubs for external dependencies | None |
| `gta5_terrain_extractor.py` | Main script for terrain extraction | `compiler.py`, `integration.py`, `terrain_extraction.py`, `visualization.py` |
| `terrain_extraction.py` | Extracts terrain data | `integration.py` |
| `visualization.py` | Visualizes terrain data | None |

### Module Dependencies

```
gta5_terrain_extractor.py
├── codewalker_modules/
│   ├── compiler.py
│   │   └── stubs.py
│   └── integration.py
│       └── compiler.py
├── terrain_extraction.py
│   └── codewalker_modules/integration.py
└── visualization.py
```

## Compilation Process Dependencies

The compilation process depends on:

1. **CodeWalker Source Files**: The original C# source code
2. **Stub Files**: Generated by `stubs.py` for external dependencies
3. **C# Compiler**: Used to compile the source files
4. **Python.NET**: Used to interact with the compiled DLL

## Integration Process Dependencies

The integration process depends on:

1. **Compiled DLL**: Generated by the compilation process
2. **Python.NET**: Used to load and interact with the DLL
3. **GTA5 Game Files**: The actual game data to be processed

## Terrain Extraction Dependencies

The terrain extraction process depends on:

1. **CodeWalker Integration**: Provided by `integration.py`
2. **Heightmap Files**: Accessed through the CodeWalker integration
3. **Terrain Processing Logic**: Implemented in `terrain_extraction.py`
4. **Visualization Tools**: Implemented in `visualization.py`

## Critical Path for Functionality

For the GTA5 Terrain Extractor to function correctly, the following critical path must be intact:

1. CodeWalker source files must be available
2. Compilation process must succeed
3. Python.NET must be able to load the compiled DLL
4. CodeWalker integration must initialize successfully
5. GTA5 game files must be accessible
6. Heightmap files must be found and processed
7. Terrain data must be extracted and visualized

Any break in this critical path will result in the terrain extraction process failing. 